<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>شركة الروضة للصرافة والتحويلات - استبيان قياس رضا العملاء </title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
        body {
            background-color: #f4f7f6; /* خلفية هادئة للصفحة */
            font-family: "Cairo", sans-serif;
            padding-top: 30px;
           direction: rtl;
            padding-bottom: 30px;
        }

        /* تحسين مظهر البطاقة الرئيسية */
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            overflow: hidden;
        }

        .card-header {
            background: linear-gradient(45deg, #faa61a, #fbbd53); /* تدرج لوني بسيط */
            color: white;
            padding: 1.5rem;
            border-bottom: none;
        }

        /* تنسيق قسم المقدمة Hero */
        .hero {
            background-color: #ffffff;
            border-bottom: 1px solid #eee;
        }
        .company-name {
            color: #1a953e;
            font-weight: 700;
        }
        .intro-icon {
            color: #faa61a;
            margin-left: 8px;
        }

        /* تحسين حقول الإدخال Input Groups */
        .input-group-text {
            background-color: #f8f9fa;
            border-color: #ced4da;
            color: #1a953e; /* لون الأيقونات */
        }
        .form-control, .form-select {
            border-color: #ced4da;
            padding: 0.6rem;
        }
        .form-control:focus, .form-select:focus {
            border-color: #faa61a;
            box-shadow: 0 0 0 0.25rem rgba(250, 166, 26, 0.25);
        }
        .form-label {
            font-weight: 600;
            color: #555;
            margin-bottom: 0.5rem;
        }

        /* تنسيق جدول الاستبيان */
        .survey-table-container {
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border-radius: 12px;
            overflow: hidden;
        }
        .table thead th {
            background-color: #1a953e;
            color: white;
            border: none;
            vertical-align: middle;
            font-weight: 600;
        }
        /* تقليل عرض عمود الأسئلة */
        .col-question {
            width: 45%; /* التحكم في عرض عمود المعايير */
            text-align: right !important;
        }
        .col-id {
            width: 5%;
        }
        /* تأثير عند مرور الماوس على الصفوف */
        .table-hover tbody tr:hover {
            background-color: #f1f8f3;
            transition: background-color 0.3s ease;
        }
        .table td {
            vertical-align: middle;
        }

        /* تنسيق قسم الملاحظات */
        .feedback-box {
            background-color: #fffdf9;
            border-radius: 12px;
            border: 2px solid #fdebd0;
        }
        .feedback-title {
            color: #d38301;
            font-weight: 700;
        }

        /* زر الإرسال */
        .btn-submit {
            background-color: #1a953e;
            border: none;
            padding: 12px 40px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(26, 149, 62, 0.3);
            transition: all 0.3s ease;
        }
        .btn-submit:hover {
            background-color: #147a32;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(26, 149, 62, 0.4);
        }
        
        /* تحسينات للموبايل */
        @media (max-width: 768px) {
            .col-question {
                width: 40%;
                font-size: 0.85rem;
            }
            .table thead th {
                font-size: 0.8rem;
            }
        }
        .fas{
            border-radius: 20%;
        }
        .input-group-text{
border:none; background:none

        }
        /* تنسيق التجاوب للهواتف */
@media (max-width: 600px) {
    /* إخفاء رأس الجدول الأصلي */
    #surveyTable thead {
        display: none;
    }

    #surveyTable, #surveyTable tbody, #surveyTable tr, #surveyTable td {
        display: block;
        width: 100%;
    }

    #surveyTable tr {
        margin-bottom: 20px;
        border: 1px solid #1a953e;
        border-radius: 15px;
        overflow: hidden;
        background: #fff;
        box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }

    #surveyTable td {
        text-align: right !important;
        padding: 12px 15px;
        border: none;
        border-bottom: 1px solid #f0f0f0;
        position: relative;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    /* تنسيق خاص لعمود السؤال في الموبايل */
    #surveyTable td.col-criterion {
        background-color: #f9fbf9;
        font-weight: bold;
        color: #1a953e;
        display: block; /* ليأخذ السطر كاملاً */
        text-align: center !important;
    }

    /* إضافة تسمية قبل دوائر الاختيار في الموبايل */
    #surveyTable td:not(.col-criterion):not(.col-id)::before {
        content: attr(data-label); /* سنسحب النص من خاصية data-label */
        font-weight: bold;
        color: #555;
    }

    #surveyTable td.col-id {
        display: none; /* إخفاء الرقم المتسلسل في الموبايل لتقليل الزحام */
    }
}
@media (max-width: 768px) {
    /* تحويل الجدول إلى نظام كتل */
    #surveyTable thead {
        display: none; /* إخفاء الرأس في الموبايل */
    }
    
    #surveyTable tbody tr {
        display: block;
        margin-bottom: 1.5rem;
        border: 1px solid #dee2e6;
        border-radius: 10px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    
    #surveyTable td {
        display: flex;
        justify-content: space-between;
        align-items: center;
        text-align: left;
        border-bottom: 1px solid #eee;
        padding: 10px 15px;
    }

    /* جعل السؤال يظهر بشكل بارز في أعلى البطاقة */
    #surveyTable td.col-criterion {
        display: block;
        text-align: center !important;
        background-color: #f8f9fa;
        font-weight: bold;
        color: #1a953e;
    }

    #surveyTable td.col-id {
        display: none; /* إخفاء الرقم في الموبايل لتقليل الزحام */
    }

    /* إظهار التسمية (ممتاز، جيد..) بجانب الراديو بوتون */
    #surveyTable td[data-label]::before {
        content: attr(data-label);
        font-weight: 600;
        color: #666;
    }
}
    </style>
</head>
<body>

<div class="container animated fadeIn">
    <div class="card">
        <div class="card-header text-center">
            <h4 class="mb-0"><i class="fas fa-poll-h me-2"></i> استبيان قياس رضا العملاء</h4>
            <p class="mb-0 opacity-75" style="font-size: 0.9rem;">Customer Satisfaction Survey</p>
        </div>
        
        <section class="hero py-4 px-3">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-1 text-center text-md-end mb-3 mb-md-0">
                        <i class="fas fa-bullseye fa-3x intro-icon"></i>
                    </div>
                    <div class="col-md-11">
                        <p class="mb-2 lead fs-6">
                            نحن في <span class="company-name"><i class="fas fa-building me-1"></i> شركة الروضة للصرافة والتحويلات</span> - نسعى جاهدين لتقديم أفضل الخدمات. رأيكم يهمنا ويساهم في تحسين جودة خدماتنا لتلبية احتياجاتكم.
                        </p>
                        <p class="mb-0 text-muted fst-italic" style="font-size: 0.9rem;">
                            <i class="fas fa-info-circle me-1 text-warning"></i> عزيزنا العميل: كلما زادت التفاصيل التي تقدمها، كان بإمكاننا فهم تجربتك بشكل أفضل. نشكر وقتك الثمين.
                        </p>
                    </div>
                </div>
            </div>
        </section>
        
        <div class="card-body p-4">
            <form id="customerSurveyForm">
                
                <h6 class="fw-bold mb-3 text-secondary"><i class="fas fa-user-tag me-2"></i> بيانات العميل الأساسية:</h6>
                <div class="row g-3 mb-5" >
                    <div class="col-md-6">
                        <label class="form-label">اسم العميل <span class="text-danger">*</span></label>
                        <div class="input-group">
                            <span class="input-group-text" style=""><i class="fas fa-user"></i></span>
                            <input type="text" name="customerName" class="form-control" placeholder="الاسم الثلاثي" required>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">نشاط العميل</label>
                        <div class="input-group">
                            <span class="input-group-text" ><i class="fas fa-briefcase"></i></span>
                            <input type="text" name="activity" class="form-control" placeholder="مثال: تجاري، فردي...">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">رقم الهاتف <span class="text-danger">*</span></label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="fas fa-phone-alt"></i></span>
                            <input type="tel" name="phone" class="form-control" id="phoneNumber" placeholder="مثال: 77xxxxxxx" required>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">الفرع المعني بالتقييم <span class="text-danger">*</span></label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="fas fa-map-marker-alt"></i></span>
                            <select class="form-select" name="branch" required>
                                <option selected disabled value="">اختر الفرع من القائمة</option>
                                <option value="main_branch">الفرع الرئيسي</option>
                                <option value="marib_junction">فرع جولة مأرب</option>
                                <option value="zubeiri">فرع الزبيري</option>
                                <option value="safia">فرع الصافية</option>
                                <option value="university">فرع الجامعة</option>
                                <option value="hodeidah">فرع الحديدة</option>
                                <option value="ib">فرع إب</option>
                                <option value="amran">فرع عمران</option>
                                <option value="saada">فرع صعدة</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="text-center mb-4">
                     <h5 class="fw-bold text-dark"><i class="fas fa-list-check me-2 text-success"></i> بنود التقييم | Survey Items</h5>
                     <p class="text-muted small">يرجى اختيار التقييم المناسب لكل بند (5 هو الأفضل)</p>
                </div>
               
              <div class="table-responsive survey-table-container mb-5">
    <table class="table table-bordered table-hover text-center mb-0" id="surveyTable">
        <thead>
            <tr>
                <th rowspan="2" class="col-id"><i class="fas fa-hashtag"></i></th>
                <th rowspan="2" class="col-question col-criterion text-end pe-3"><i class="fas fa-clipboard-list me-2"></i> المعايير / الأسئلة</th>
                <th colspan="5"><i class="fas fa-star me-1 text-warning"></i> مستوى الرضا</th>
            </tr>
            <tr style="font-size: 0.85rem;">
                <th>5<br><span class="badge bg-success fw-normal">ممتاز</span></th>
                <th>4<br><span class="badge bg-primary fw-normal">جيد جداً</span></th>
                <th>3<br><span class="badge bg-info text-dark fw-normal">جيد</span></th>
                <th>2<br><span class="badge bg-secondary fw-normal">مقبول</span></th>
                <th>1<br><span class="badge bg-danger fw-normal">ضعيف</span></th>
            </tr>
        </thead>
        <tbody id="surveyBody">
            </tbody>
    </table>
</div>

                <div class="feedback-box p-4 mb-4">
                    <label class="form-label feedback-title h6 mb-3">
                        <i class="fas fa-comment-dots fa-lg me-2"></i> هل لديك أي شكوى أو مقترح إضافي؟
                    </label>
                    <textarea class="form-control" name="feedback" rows="4" placeholder="مساحة حرة لكتابة ملاحظاتك، مقترحاتك، أو تفاصيل شكواك..."></textarea>
                </div>

                <div class="text-center mt-5">
                    <button type="submit" id="submitBtn" class="btn btn-primary btn-submit">
                        <i class="fas fa-paper-plane me-2"></i> إرسال التقييم
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <div class="text-center mt-3 mb-5">
        <small class="text-muted">جميع الحقوق محفوظة لشركة الروضة للصرافة والتحويلات © 2024</small>
    </div>
</div>

<script>
    // مصفوفة البنود (لم تتغير)
    const surveyItems = [
        "جودة الخدمات المقدمة بشكل عام.",
        "دقة إنجاز المعاملات في الوقت المحدد.",
        "كفاءة الموظفين وحسن تعاملهم وتصرفهم.",
        "المدة الزمنية المستغرقة لتقديم الخدمة (سرعة الإنجاز).",
        "دقة التقارير أو الإشعارات المستلمة من الشركة.",
        "سرعة الحصول على التقارير المطلوبة.",
        "سرعة استجابة الشركة للملاحظات أو الشكاوى.",
        "المرونة في التعامل وسهولة الإجراءات.",
        "مبادرة الشركة في تطوير الخدمات وتلبية الاحتياجات.",
        "مدى الرضا عن أسعار الخدمات ورسوم التحويل."
    ];

   const surveyBody = document.getElementById('surveyBody');

// مصفوفة القيم والتسميات بالترتيب العكسي
const ratingOptions = [
    { val: 5, label: "ممتاز" },
    { val: 4, label: "جيد جداً" },
    { val: 3, label: "جيد" },
    { val: 2, label: "مقبول" },
    { val: 1, label: "ضعيف" }
];

surveyItems.forEach((item, index) => {
    const questionIcon = '<i class="fas fa-caret-left text-success me-2 opacity-50"></i>';
    
    // بدء بناء الصف
    let row = `
        <tr>
            <td class="fw-bold col-id">${index + 1}</td>
            <td class="text-end pe-3 col-criterion">${questionIcon} ${item}</td>`;
    
    // توليد الأعمدة الخمسة للتقييم ديناميكياً
    ratingOptions.forEach(option => {
        row += `
            <td data-label="${option.label}">
                <div class="form-check d-flex justify-content-center">
                    <input class="form-check-input" type="radio" 
                           name="q${index + 1}" 
                           value="${option.val}" 
                           ${option.val === 5 ? 'required' : ''}>
                </div>
            </td>`;
    });

    row += `</tr>`;
    surveyBody.innerHTML += row;
});

    document.getElementById('customerSurveyForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const btn = document.getElementById('submitBtn');
        const originalBtnText = btn.innerHTML;
        btn.disabled = true;
        btn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span> جاري الإرسال...';

        // الرابط الخاص بك (تأكد من صحته)
        const scriptURL = 'https://script.google.com/macros/s/AKfycbyIE76zPEK8TMC1-Hahc0YA42C8ND4VviR2VKEfVQZHZAbUGtldAurq5e9_jAXepmbP/exec';

        fetch(scriptURL, { method: 'POST', body: new FormData(this)})
            .then(response => {
                // استخدام SweetAlert بدلاً من alert العادي إذا أردت مظهراً أجمل (اختياري)
                // هنا سنكتفي بالـ alert العادي مع تنسيق بسيط في النص
                alert('✅ تم استلام تقييمك بنجاح!\n\nنشكركم على وقتكم وتعاونكم معنا.');
                this.reset();
                btn.disabled = false;
                btn.innerHTML = originalBtnText;
                // تمرير الصفحة للأعلى بعد الإرسال
                window.scrollTo({ top: 0, behavior: 'smooth' });
            })
            .catch(error => {
                alert('❌ عذراً، حدث خطأ أثناء محاولة الإرسال.\n\nيرجى التحقق من اتصال الإنترنت والمحاولة مرة أخرى.');
                btn.disabled = false;
                btn.innerHTML = originalBtnText;
            });
    });
</script>
</body>
</html>
